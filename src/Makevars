SYSNAME=`uname`

# PETSC_DIR not set, populate with defaults
# default for MAC OS X is home brew
if [ ${SYSNAME} == "Darwin" ] then
	PETSC_DIR=/usr/local/Cellar/petsc/3.6.3
    
# default for Linux is pip install
if [ ${SYSNAME} == "Linux" ] then 
    PETSC_DIR=/usr/local/lib/python2.7/dist-packages/petsc

# define MPI_INCLUDE default location
if [ ${MPI_INCLUDE} == "" ] then \
    MPI_INCLUDE=${PETSC_DIR}/include/petsc/mpiuni
    
# check if PETSC_ARCH was set separately
if [ ${PETSC_ARCH} == "" ] then
    PETSC_INCLUDE=-I${PETSC_DIR}/include
    PETSC_LIB=${PETSC_DIR}/lib 

if [ ${PETSC_ARCH} != "" ] then
    PETSC_INCLUDE= -I${PETSC_DIR}/$(PETSC_ARCH)/include -I${PETSC_DIR}/include
    PETSC_LIB= ${PETSC_DIR}/$(PETSC_ARCH)/lib

# link to PETSC, lapack, blas and a few more libraries
PKG_LIBS= -Wl,-rpath,${PETSC_LIB} -L${PETSC_LIB} -lpetsc -llapack -lblas -lpthread -lm -lgfortran -lquadmath -lstdc++ -ldl

# add include directories so that the c code can find the headers
PKG_CXXFLAGS= -I../inst/include ${PETSC_INCLUDE} -I${MPI_INCLUDE}
